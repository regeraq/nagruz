# РУКОВОДСТВО ПО ИСПОЛЬЗОВАНИЮ АДМИН-ПАНЕЛИ

Полное руководство по работе с админ-панелью сайта "Нагрузочные устройства".

---

## ДОСТУП К АДМИН-ПАНЕЛИ

### Авторизация

1. Откройте страницу `/admin` в браузере
2. Если вы не авторизованы, вас перенаправит на `/login`
3. Войдите с учетными данными администратора
4. После входа вы получите доступ к админ-панели

**Важно:** Доступ к админ-панели имеют только пользователи с ролями `admin` или `superadmin`.

---

## СТРУКТУРА АДМИН-ПАНЕЛИ

Админ-панель состоит из 12 основных разделов (вкладок):

1. **Аналитика** - статистика и метрики сайта
2. **Товары** - управление товарами (продуктами)
3. **Пользователи** - управление пользователями
4. **Админы** - управление администраторами
5. **Заказы** - управление заказами
6. **Заявки** - заявки с формы контактов
7. **Промокоды** - управление промокодами
8. **Контент** - управление динамическим контентом
9. **Контакты** - управление контактами сайта (футер)
10. **Compliance** - настройки Cookie баннера
11. **Настройки** - общие настройки сайта (SEO, контакты)
12. **БД** - выгрузка базы данных

---

## 1. АНАЛИТИКА

### Назначение
Просмотр статистики и метрик сайта.

### Возможности
- **Общая статистика:**
  - Количество пользователей
  - Количество товаров
  - Количество заказов
  - Общая выручка
  - Количество активных промокодов

### Использование
1. Перейдите на вкладку "Аналитика"
2. Просмотрите общую статистику
3. Данные обновляются автоматически

---

## 2. ТОВАРЫ

### Назначение
Управление товарами (продуктами) сайта.

### Возможности

#### Просмотр товаров
- Список всех товаров в виде таблицы
- Отображение: название, артикул (SKU), цена, количество на складе, статус

#### Создание товара
1. Нажмите кнопку "Добавить товар"
2. Заполните форму:
   - **ID товара** (уникальный идентификатор, например: `nu-100`)
   - **Название**
   - **Описание**
   - **Цена** (в рублях)
   - **Артикул (SKU)**
   - **Характеристики**
   - **Количество на складе**
3. Нажмите "Создать"

#### Редактирование товара

**Редактирование цены и количества:**
1. В строке товара нажмите на иконку редактирования (карандаш)
2. Измените цену или количество
3. Нажмите "Сохранить"

**Полное редактирование:**
1. Нажмите на название товара или кнопку "Редактировать"
2. Измените необходимые поля
3. Нажмите "Сохранить"

#### Управление изображениями товара
1. Нажмите кнопку "Фотографии" в строке товара
2. В открывшемся диалоге:
   - **Просмотр фотографий:** Все изображения товара отображаются
   - **Добавление фотографии:**
     - Выберите файл изображения (JPG, PNG, WebP)
     - Или введите URL изображения
     - Нажмите "Добавить"
   - **Удаление фотографии:** Нажмите кнопку удаления (корзина) рядом с изображением

#### Удаление товара
1. Отметьте чекбоксы рядом с товарами, которые хотите удалить
2. Нажмите кнопку "Удалить выбранные"
3. Подтвердите удаление

**Важно:** Удаление товара необратимо!

---

## 3. ПОЛЬЗОВАТЕЛИ

### Назначение
Управление пользователями сайта.

### Возможности

#### Просмотр пользователей
- Список всех пользователей
- Поиск по email, имени, телефону
- Фильтрация по роли

#### Изменение роли пользователя
1. Найдите пользователя в списке
2. Выберите новую роль из выпадающего списка:
   - **User** - обычный пользователь
   - **Moderator** - модератор
   - **Admin** - администратор
   - **Superadmin** - супер-администратор
3. Роль изменится автоматически

#### Блокировка/разблокировка пользователя
1. Найдите пользователя в списке
2. Нажмите кнопку "Заблокировать" или "Разблокировать"
3. Подтвердите действие

#### Удаление пользователя
1. Найдите пользователя в списке
2. Нажмите кнопку удаления (корзина)
3. Подтвердите удаление

**Важно:** 
- Удаление пользователя необратимо
- Все данные пользователя (заказы, избранное, уведомления) будут удалены

---

## 4. АДМИНЫ

### Назначение
Управление администраторами сайта.

### Возможности

#### Просмотр администраторов
- Список всех администраторов и модераторов
- Отображение: email, роль, дата создания

#### Создание администратора
1. Нажмите кнопку "Добавить администратора"
2. Заполните форму:
   - **Email** (обязательно)
   - **Пароль** (обязательно)
   - **Имя** (опционально)
   - **Фамилия** (опционально)
   - **Роль:** Admin, Moderator или Superadmin
3. Нажмите "Создать"

#### Изменение роли администратора
1. Найдите администратора в списке
2. Выберите новую роль из выпадающего списка
3. Роль изменится автоматически

---

## 5. ЗАКАЗЫ

### Назначение
Управление заказами пользователей.

### Возможности

#### Просмотр заказов
- Список всех заказов
- Поиск по ID заказа, email клиента, телефону
- Фильтрация по статусу оплаты

#### Изменение статуса заказа
1. Найдите заказ в списке
2. Выберите новый статус из выпадающего списка:
   - **Ожидание** (pending)
   - **Оплачен** (paid)
   - **В обработке** (processing)
   - **Отправлен** (shipped)
   - **Доставлен** (delivered)
   - **Отменен** (cancelled)
3. Статус изменится автоматически

#### Просмотр деталей заказа
1. Нажмите на заказ в списке
2. Откроется детальная информация:
   - ID заказа
   - Информация о клиенте
   - Информация о товаре
   - Количество
   - Сумма
   - Способ оплаты
   - Дата создания

---

## 6. ЗАЯВКИ

### Назначение
Просмотр заявок, отправленных через форму контактов на сайте.

### Возможности

#### Просмотр заявок
- Список всех заявок
- Отображение: имя, email, телефон, компания, сообщение, дата
- Если прикреплен файл, отображается ссылка для скачивания

#### Удаление заявки
1. Найдите заявку в списке
2. Нажмите кнопку удаления (корзина)
3. Подтвердите удаление

---

## 7. ПРОМОКОДЫ

### Назначение
Управление промокодами (скидками).

### Возможности

#### Просмотр промокодов
- Список всех промокодов
- Отображение: код, скидка (%), срок действия, статус (активен/неактивен)

#### Создание промокода
1. Нажмите кнопку "Добавить промокод"
2. Заполните форму:
   - **Код** (уникальный код промокода, например: `SUMMER2025`)
   - **Скидка (%)** (от 0 до 100)
   - **Срок действия** (опционально)
3. Нажмите "Создать"

#### Активация/деактивация промокода
1. Найдите промокод в списке
2. Используйте переключатель для активации/деактивации

#### Удаление промокода
1. Найдите промокод в списке
2. Нажмите кнопку удаления (корзина)
3. Подтвердите удаление

---

## 8. КОНТЕНТ

### Назначение
Управление динамическим контентом сайта (тексты, описания).

### Возможности

#### Просмотр контента
- Список всех элементов контента
- Фильтрация по странице и разделу

#### Редактирование контента
1. Введите **ключ** контента (например: `home_hero_title`)
2. При необходимости укажите **страницу** и **раздел**
3. Введите **значение** (текст или HTML)
4. Нажмите "Сохранить"

#### Удаление контента
1. Введите ключ контента
2. Нажмите "Удалить"
3. Подтвердите удаление

**Примеры ключей:**
- `home_hero_title` - заголовок на главной странице
- `home_description` - описание на главной странице
- `contact_telegram` - Telegram аккаунт

---

## 9. КОНТАКТЫ

### Назначение
Управление контактной информацией сайта (телефоны, email, адреса, социальные сети).

### Возможности

#### Просмотр контактов
- Список всех контактов
- Отображение: тип, название, значение, иконка, статус

#### Создание контакта
1. Нажмите кнопку "Добавить контакт"
2. Заполните форму:
   - **Тип:** phone, email, address, telegram, whatsapp, vk, etc.
   - **Название** (например: "Основной телефон")
   - **Значение** (например: "+7 (999) 123-45-67")
   - **Иконка** (опционально, название иконки)
   - **Показывать в футере** (чекбокс)
3. Нажмите "Создать"

#### Редактирование контакта
1. Найдите контакт в списке
2. Нажмите кнопку редактирования (карандаш)
3. Измените необходимые поля
4. Нажмите "Сохранить"

#### Удаление контакта
1. Найдите контакт в списке
2. Нажмите кнопку удаления (корзина)
3. Подтвердите удаление

---

## 10. COMPLIANCE

### Назначение
Настройки Cookie баннера для соответствия требованиям РКН.

### Возможности

#### Настройка Cookie баннера
1. Перейдите на вкладку "Compliance"
2. Настройте параметры:
   - **Текст баннера** - основной текст уведомления о cookies
   - **Показывать баннер** - включить/выключить баннер
   - **Ссылка на политику** - ссылка на страницу политики (например: `/privacy-policy`)
3. Нажмите "Сохранить настройки"

**Важно:** Cookie баннер будет отображаться на всех страницах сайта.

---

## 11. НАСТРОЙКИ

### Назначение
Общие настройки сайта (SEO и контактные данные).

### Возможности

#### Настройки SEO
- **SEO заголовок** - заголовок для поисковых систем
- **SEO описание** - описание для поисковых систем
- **SEO ключевые слова** - ключевые слова

#### Контактные данные
- **Email** - основной email для связи
- **Телефон** - основной телефон
- **Адрес** - физический адрес

**Использование:**
1. Измените необходимые поля
2. Нажмите "Сохранить" рядом с каждым полем

---

## 12. БД

### Назначение
Выгрузка базы данных для резервного копирования.

### Возможности

#### Экспорт базы данных
1. Перейдите на вкладку "БД"
2. Нажмите кнопку "Выгрузить базу данных (SQL)"
3. Файл `database-backup-YYYY-MM-DD.sql` будет скачан автоматически
4. Файл содержит полный SQL-дамп всех таблиц и данных

**Формат экспорта:**
- SQL-дамп (текстовый файл)
- Содержит структуру таблиц и все данные
- Можно использовать для восстановления базы данных через `psql` или `pg_restore`

**Важно:** 
- Экспорт включает все данные (включая пароли в захешированном виде)
- Файл может быть большим при большом количестве данных
- Рекомендуется делать регулярные экспорты для резервного копирования
- Экспорт доступен только администраторам

**Использование для восстановления:**
```bash
psql -U username -d database_name -f database-backup-YYYY-MM-DD.sql
```

---

## ЖУРНАЛ ДЕЙСТВИЙ (AUDIT LOG)

### Назначение
Просмотр истории всех действий администраторов.

### Доступ
Журнал действий доступен через вкладку "Аналитика" или через API `/api/admin/audit-logs`.

### Что логируется
- Создание, изменение, удаление товаров
- Создание, изменение, удаление пользователей
- Изменение статусов заказов
- Создание, изменение, удаление промокодов
- Отправка уведомлений
- Изменение настроек
- Экспорт базы данных
- И другие административные действия

### Информация в журнале
- **Дата и время** действия
- **Администратор** (кто выполнил действие)
- **Действие** (тип действия)
- **Сущность** (тип объекта)
- **Детали** (дополнительная информация)

---

## БЕЗОПАСНОСТЬ

### Рекомендации

1. **Пароли:**
   - Используйте сильные пароли для администраторов
   - Регулярно меняйте пароли
   - Не передавайте пароли третьим лицам

2. **Сессии:**
   - Выходите из админ-панели после работы
   - Не оставляйте открытую админ-панель на общедоступных компьютерах

3. **Роли:**
   - Предоставляйте права администратора только доверенным пользователям
   - Используйте роль `moderator` для пользователей с ограниченными правами

4. **Резервное копирование:**
   - Регулярно экспортируйте базу данных
   - Храните экспорты в безопасном месте
   - Делайте резервные копии перед важными изменениями

5. **Аудит:**
   - Регулярно проверяйте журнал действий
   - Обращайте внимание на подозрительную активность

---

## РЕШЕНИЕ ПРОБЛЕМ

### Проблема: "Not authorized" при доступе к админ-панели

**Решение:**
1. Убедитесь, что у вашего аккаунта роль `admin` или `superadmin`
2. Выйдите и войдите снова
3. Очистите cookies и локальное хранилище

### Проблема: Не сохраняются изменения

**Решение:**
1. Проверьте подключение к интернету
2. Обновите страницу
3. Попробуйте выйти и войти снова

### Проблема: Ошибка при экспорте базы данных

**Решение:**
1. Убедитесь, что у вас есть права администратора
2. Проверьте подключение к базе данных
3. Попробуйте еще раз через некоторое время

### Проблема: Не загружаются изображения товаров

**Решение:**
1. Проверьте формат файла (допустимы: JPG, PNG, WebP)
2. Проверьте размер файла (максимум 5 МБ)
3. Попробуйте загрузить другое изображение

---

## СОКРАЩЕНИЯ И ТЕРМИНОЛОГИЯ

- **SKU** - Stock Keeping Unit (артикул товара)
- **SBP** - Система быстрых платежей
- **Compliance** - Соответствие требованиям (в данном случае - требованиям РКН)
- **Cookie баннер** - Уведомление об использовании cookies
- **Audit Log** - Журнал действий (аудит)
- **Admin** - Администратор
- **Superadmin** - Супер-администратор (полные права)

---

## КОНТАКТЫ И ПОДДЕРЖКА

При возникновении проблем или вопросов:
1. Проверьте данное руководство
2. Обратитесь к технической документации проекта
3. Свяжитесь с разработчиками проекта

---

**Дата последнего обновления:** 2025-01-XX

