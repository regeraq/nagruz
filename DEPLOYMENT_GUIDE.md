# üöÄ –ü–û–õ–ù–û–ï –†–£–ö–û–í–û–î–°–¢–í–û –ü–û –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Æ –ü–†–û–ï–ö–¢–ê

**–í–µ—Ä—Å–∏—è:** 1.2  
**–¶–µ–ª–µ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:** Ubuntu 22.04 LTS –Ω–∞ VPS (FirstByte, Timeweb, Selectel –∏ –¥—Ä.)  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2024

---

## ‚ö° –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢: –¢–†–ï–ë–û–í–ê–ù–ò–Ø –ö –°–ï–†–í–ï–†–£

**–î–ª—è –Ω–∞–≥—Ä—É–∑–∫–∏ 1-3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –¥–µ–Ω—å:**

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- **RAM:** 1 GB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 2 GB)
- **–î–∏—Å–∫:** 15 GB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 20 GB)
- **CPU:** 1 —è–¥—Ä–æ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 2 —è–¥—Ä–∞)
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** ~300-500‚ÇΩ/–º–µ—Å—è—Ü (–º–∏–Ω–∏–º—É–º) –∏–ª–∏ ~500-700‚ÇΩ/–º–µ—Å—è—Ü (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã:
- **FirstByte:** 1-2 GB RAM, 15-20 GB SSD ‚Äî –æ—Ç 300-700‚ÇΩ/–º–µ—Å
- **Timeweb:** 1-2 GB RAM, 15-20 GB SSD ‚Äî –æ—Ç 350-800‚ÇΩ/–º–µ—Å
- **Selectel:** 1-2 GB RAM, 15-20 GB SSD ‚Äî –æ—Ç 400-900‚ÇΩ/–º–µ—Å

**–ü—Ä–æ–µ–∫—Ç —É–∂–µ –Ω–∞ GitHub:** https://github.com/regeraq/nagruz

---

## üìã –°–û–î–ï–†–ñ–ê–ù–ò–ï

1. [–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞](#–∞–Ω–∞–ª–∏–∑-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ FirstByte VPS](#–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏-firstbyte-vps)
3. [–®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞](#—à–∞–≥-1-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-—Å–µ—Ä–≤–µ—Ä–∞)
4. [–®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è](#—à–∞–≥-2-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ-–ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ-–æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è)
5. [–®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#—à–∞–≥-3-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
6. [–®–∞–≥ 4: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—à–∞–≥-4-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ-–∫–æ–¥–∞-–ø—Ä–æ–µ–∫—Ç–∞)
7. [–®–∞–≥ 5: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#—à–∞–≥-5-–∑–∞–ø—É—Å–∫-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
8. [–®–∞–≥ 6: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx –≤ –∫–∞—á–µ—Å—Ç–≤–µ Reverse Proxy](#—à–∞–≥-6-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-nginx-–≤-–∫–∞—á–µ—Å—Ç–≤–µ-reverse-proxy)
9. [–®–∞–≥ 7: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTPS](#—à–∞–≥-7-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-https)
10. [–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –º–∞–ª–æ–º–æ—â–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞](#–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è-–¥–ª—è-–º–∞–ª–æ–º–æ—â–Ω–æ–≥–æ-—Å–µ—Ä–≤–µ—Ä–∞-768-mb-ram)
11. [–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#–ø—Ä–æ–≤–µ—Ä–∫–∞-–∏-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
12. [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫](#—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–ø–æ–ª–∞–¥–æ–∫)

---

## üîç –ê–ù–ê–õ–ò–ó –ü–†–û–ï–ö–¢–ê

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–∏–º –æ—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞:

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

- **–Ø–∑—ã–∫ –∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫:** Node.js + Express + React (TypeScript)
- **–¢–∏–ø –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:** SSR/SPA –≥–∏–±—Ä–∏–¥ (Express —Å–µ—Ä–≤–µ—Ä —Å React —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Drizzle ORM)
- **–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤:** npm
- **–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞:** `dist/index.js` (–ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏)
- **–ü–æ—Ä—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:** 5000 (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `PORT`)
- **–°–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∫–∏:**
  - `npm install` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
  - `npm run build` - —Å–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ (Vite + esbuild)
  - `npm start` - –∑–∞–ø—É—Å–∫ production –≤–µ—Ä—Å–∏–∏

### –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```env
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
DATABASE_URL=postgresql://user:password@localhost:5432/database_name
NODE_ENV=production
PORT=5000

# JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
JWT_SECRET=your-very-secure-random-secret-key-here

# Email –æ—Ç–ø—Ä–∞–≤–∫–∞ (Resend)
RESEND_API_KEY=your-resend-api-key
OWNER_EMAIL=your-email@example.com
RESEND_FROM_EMAIL=onboarding@resend.dev  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ
FRONTEND_URL=https://your-domain.com  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —Å—Å—ã–ª–æ–∫ –≤ email
```

---

## –û–°–û–ë–ï–ù–ù–û–°–¢–ò FIRSTBYTE VPS

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ FirstByte

FirstByte ‚Äî —Ä–æ—Å—Å–∏–π—Å–∫–∏–π —Ö–æ—Å—Ç–∏–Ω–≥-–ø—Ä–æ–≤–∞–π–¥–µ—Ä, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π VPS —Å–µ—Ä–≤–µ—Ä—ã. –ü—Ä–∏ –ø–æ–∫—É–ø–∫–µ —Å–µ—Ä–≤–µ—Ä–∞ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:

- **–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** –î–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –Ω–∞ —Å–∞–π—Ç–µ firstbyte.ru
- **–î–∞–Ω–Ω—ã–µ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞:** IP-–∞–¥—Ä–µ—Å, root –ø–∞—Ä–æ–ª—å (–∏–ª–∏ SSH –∫–ª—é—á)
- **–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:** –û–±—ã—á–Ω–æ Ubuntu 22.04 LTS –∏–ª–∏ –¥—Ä—É–≥–∞—è –≤—ã–±—Ä–∞–Ω–Ω–∞—è –û–°
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –°–µ—Ä–≤–µ—Ä—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –†–æ—Å—Å–∏–∏ (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º 152-–§–ó)

### üìä –ú–ò–ù–ò–ú–ê–õ–¨–ù–´–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø –ö –°–ï–†–í–ï–†–£

**–î–ª—è –Ω–∞–≥—Ä—É–∑–∫–∏ 1-3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –¥–µ–Ω—å:**

#### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–∞–±—Å–æ–ª—é—Ç–Ω—ã–π –º–∏–Ω–∏–º—É–º):
- **RAM:** 1 GB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 2 GB)
- **–î–∏—Å–∫:** 15 GB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 20 GB)
- **CPU:** 1 —è–¥—Ä–æ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 2 —è–¥—Ä–∞)
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** ~300-500‚ÇΩ/–º–µ—Å—è—Ü

#### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–∫–æ–º—Ñ–æ—Ä—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞):
- **RAM:** 2 GB
- **–î–∏—Å–∫:** 20 GB
- **CPU:** 2 —è–¥—Ä–∞
- **–°—Ç–æ–∏–º–æ—Å—Ç—å:** ~500-700‚ÇΩ/–º–µ—Å—è—Ü

#### –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤:

**–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (1 GB RAM, 15 GB –¥–∏—Å–∫):**
- –°–∏—Å—Ç–µ–º–∞ Ubuntu: ~300-400 MB RAM, ~3-4 GB –¥–∏—Å–∫
- PostgreSQL (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π): ~150-200 MB RAM, ~500 MB –¥–∏—Å–∫
- Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: ~200-300 MB RAM, ~1-2 GB –¥–∏—Å–∫ (—Å node_modules)
- Nginx: ~20-30 MB RAM, ~50 MB –¥–∏—Å–∫
- –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞: ~500 MB –¥–∏—Å–∫
- –õ–æ–≥–∏ –∏ —Ä–µ–∑–µ—Ä–≤: ~1-2 GB –¥–∏—Å–∫
- –†–µ–∑–µ—Ä–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã: ~200-300 MB RAM, ~5-7 GB –¥–∏—Å–∫
- **–ò—Ç–æ–≥–æ:** ~700-900 MB RAM, ~10-12 GB –¥–∏—Å–∫

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (2 GB RAM, 20 GB –¥–∏—Å–∫):**
- –ë–æ–ª—å—à–µ –º–µ—Å—Ç–∞ –¥–ª—è –ª–æ–≥–æ–≤ –∏ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π
- –ö–æ–º—Ñ–æ—Ä—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –±–µ–∑ swap —Ñ–∞–π–ª–∞
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–æ—Å—Ç–∞ –Ω–∞–≥—Ä—É–∑–∫–∏ –¥–æ 5-10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### üõí –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ï –ü–†–û–í–ê–ô–î–ï–†–´

#### FirstByte (—Ä–æ—Å—Å–∏–π—Å–∫–∏–π —Ö–æ—Å—Ç–∏–Ω–≥):
- **–ú–∏–Ω–∏–º—É–º:** 1 GB RAM, 15 GB SSD, 1 CPU ‚Äî ~300-400‚ÇΩ/–º–µ—Å
- **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:** 2 GB RAM, 20 GB SSD, 2 CPU ‚Äî ~500-700‚ÇΩ/–º–µ—Å
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:** –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ 152-–§–ó, —Å–µ—Ä–≤–µ—Ä—ã –≤ –†–æ—Å—Å–∏–∏

#### Timeweb:
- **–ú–∏–Ω–∏–º—É–º:** 1 GB RAM, 15 GB SSD, 1 CPU ‚Äî ~350-500‚ÇΩ/–º–µ—Å
- **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:** 2 GB RAM, 20 GB SSD, 2 CPU ‚Äî ~600-800‚ÇΩ/–º–µ—Å

#### Selectel:
- **–ú–∏–Ω–∏–º—É–º:** 1 GB RAM, 15 GB SSD, 1 CPU ‚Äî ~400-600‚ÇΩ/–º–µ—Å
- **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:** 2 GB RAM, 20 GB SSD, 2 CPU ‚Äî ~700-900‚ÇΩ/–º–µ—Å

### ‚ö†Ô∏è –í–ê–ñ–ù–û: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Å–µ—Ä–≤–µ—Ä —Å 1 GB RAM, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

1. ‚úÖ **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å swap —Ñ–∞–π–ª** (–®–∞–≥ 1.4.1) - **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!**
2. ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å PostgreSQL** (–®–∞–≥ 2.2.1) - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ!
3. ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å Node.js —á–µ—Ä–µ–∑ PM2** (–®–∞–≥ 5.1) - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
4. ‚úÖ **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ—á–∏—â–∞—Ç—å –ª–æ–≥–∏** - –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ

**–û–∂–∏–¥–∞–µ–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ (1 GB RAM, 15 GB –¥–∏—Å–∫):**
- –ü–∞–º—è—Ç—å: ~700-900 MB –∏–∑ 1 GB (—Å swap —Ñ–∞–π–ª–æ–º)
- –î–∏—Å–∫: ~10-12 GB –∏–∑ 15 GB
- CPU: 10-20% –≤ –ø–æ–∫–æ–µ, –¥–æ 40% –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ 1-3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –¥–æ—Å—Ç—É–ø–∞

1. –í–æ–π–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç FirstByte: https://firstbyte.ru
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ú–æ–∏ —Å–µ—Ä–≤–µ—Ä—ã" –∏–ª–∏ "VPS"
3. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à —Å–µ—Ä–≤–µ—Ä –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –µ–≥–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ:
   - **IP-–∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞**
   - **Root –ø–∞—Ä–æ–ª—å** (–∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ SSH –∫–ª—é—á)
   - **–ü–æ—Ä—Ç SSH** (–æ–±—ã—á–Ω–æ 22, –Ω–æ –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è)

### –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è –¥–ª—è FirstByte

- ‚úÖ –°–µ—Ä–≤–µ—Ä—ã FirstByte –æ–±—ã—á–Ω–æ —É–∂–µ –∏–º–µ—é—Ç –±–∞–∑–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É
- ‚úÖ –§–∞–π—Ä–≤–æ–ª –º–æ–∂–µ—Ç –±—ã—Ç—å —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –Ω–æ —Å—Ç–æ–∏—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
- ‚ö†Ô∏è –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–±—Ä–∞–Ω Ubuntu 22.04 LTS –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞
- ‚ö†Ô∏è –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–æ–≤—ã–π, –≤–æ–∑–º–æ–∂–Ω–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –û–° (–æ–±—ã—á–Ω–æ 5-15 –º–∏–Ω—É—Ç)

---

## –®–ê–ì 1: –ü–û–î–ì–û–¢–û–í–ö–ê –°–ï–†–í–ï–†–ê

### 1.1. –ü–µ—Ä–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É FirstByte –ø–æ SSH

**–í–∞—Ä–∏–∞–Ω—Ç A: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å –ø–∞—Ä–æ–ª–µ–º (–ø–µ—Ä–≤—ã–π —Ä–∞–∑)**

```bash
ssh root@YOUR_SERVER_IP
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø–æ—Ä—Ç–∞ (–µ—Å–ª–∏ –ø–æ—Ä—Ç –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π)**

```bash
ssh -p PORT_NUMBER root@YOUR_SERVER_IP
```

**–í–∞—Ä–∏–∞–Ω—Ç C: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å SSH –∫–ª—é—á–æ–º (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)**

```bash
ssh -i /path/to/your/private/key root@YOUR_SERVER_IP
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**
- –ó–∞–º–µ–Ω–∏—Ç–µ `YOUR_SERVER_IP` –Ω–∞ IP-–∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –∏–∑ –ø–∞–Ω–µ–ª–∏ FirstByte
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ —Å–∏—Å—Ç–µ–º–∞ —Å–ø—Ä–æ—Å–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ fingerprint - –≤–≤–µ–¥–∏—Ç–µ `yes`
- –í–≤–µ–¥–∏—Ç–µ root –ø–∞—Ä–æ–ª—å –∏–∑ –ø–∞–Ω–µ–ª–∏ FirstByte

**–ï—Å–ª–∏ –Ω–µ –º–æ–∂–µ—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –≤ –ø–∞–Ω–µ–ª–∏ FirstByte
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π IP-–∞–¥—Ä–µ—Å
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ª–∏ –≤–∞—à IP –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ FirstByte
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ–±-–∫–æ–Ω—Å–æ–ª—å –≤ –ø–∞–Ω–µ–ª–∏ FirstByte (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞)

### 1.2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –æ–±–Ω–æ–≤–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É –¥–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤–µ—Ä—Å–∏–π –ø–∞–∫–µ—Ç–æ–≤:

```bash
apt update
apt upgrade -y
```

### 1.3. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å sudo-–ø—Ä–∞–≤–∞–º–∏

**–í–∞–∂–Ω–æ:** –†–∞–±–æ—Ç–∞ –ø–æ–¥ root –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–∞. –°–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
adduser deploy

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É sudo
usermod -aG sudo deploy

# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
su - deploy
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í–æ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ø—Ä–æ—Å–∏—Ç –≤–≤–µ—Å—Ç–∏ –ø–∞—Ä–æ–ª—å. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å.

### 1.4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SSH-–∫–ª—é—á–∏ –≤–º–µ—Å—Ç–æ –ø–∞—Ä–æ–ª–µ–π:

```bash
# –ù–∞ –≤–∞—à–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ —Å–æ–∑–¥–∞–π—Ç–µ SSH-–∫–ª—é—á (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω)
ssh-keygen -t ed25519 -C "your_email@example.com"

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä
ssh-copy-id deploy@YOUR_SERVER_IP
```

–¢–µ–ø–µ—Ä—å –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –±–µ–∑ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è:

```bash
ssh deploy@YOUR_SERVER_IP
```

### 1.4.1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Swap —Ñ–∞–π–ª–∞ (–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û –¥–ª—è –º–∞–ª–æ–º–æ—â–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞!)

**–î–ª—è —Å–µ—Ä–≤–µ—Ä–∞ —Å 768 MB RAM swap —Ñ–∞–π–ª –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω!** –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç –ø–∞–¥–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ –ø–∞–º—è—Ç–∏.

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ swap
free -h
swapon --show

# –°–æ–∑–¥–∞–Ω–∏–µ swap —Ñ–∞–π–ª–∞ —Ä–∞–∑–º–µ—Ä–æ–º 1 GB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞)
sudo fallocate -l 1G /swapfile

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
sudo chmod 600 /swapfile

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∫ swap
sudo mkswap /swapfile

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è swap
sudo swapon /swapfile

# –ü—Ä–æ–≤–µ—Ä–∫–∞
free -h
swapon --show

# –°–¥–µ–ª–∞—Ç—å swap –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º (–∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ)
echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab

# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ swap (–¥–ª—è SSD)
sudo sysctl vm.swappiness=10
sudo sysctl vm.vfs_cache_pressure=50

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
echo 'vm.swappiness=10' | sudo tee -a /etc/sysctl.conf
echo 'vm.vfs_cache_pressure=50' | sudo tee -a /etc/sysctl.conf
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
```bash
free -h
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å ~1.7 GB –¥–æ—Å—Ç—É–ø–Ω–æ–π –ø–∞–º—è—Ç–∏ (768 MB RAM + 1 GB swap)
```

### 1.5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑–æ–≤–æ–≥–æ —Ñ–∞–π—Ä–≤–æ–ª–∞ (UFW)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –¥–ª—è FirstByte:** –ù–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö FirstByte —Ñ–∞–π—Ä–≤–æ–ª –º–æ–∂–µ—Ç –±—ã—Ç—å —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∞–π—Ä–≤–æ–ª–∞ –≤ –ø–∞–Ω–µ–ª–∏ FirstByte –ø–µ—Ä–µ–¥ –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π UFW.

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ UFW (Uncomplicated Firewall):

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ UFW
which ufw

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ UFW (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
sudo apt install -y ufw

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
sudo ufw status

# –ï—Å–ª–∏ —Ñ–∞–π—Ä–≤–æ–ª —É–∂–µ –∞–∫—Ç–∏–≤–µ–Ω, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã
# –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ SSH (–í–ê–ñ–ù–û: —Å–¥–µ–ª–∞–π—Ç–µ —ç—Ç–æ –ø–µ—Ä–µ–¥ –≤–∫–ª—é—á–µ–Ω–∏–µ–º —Ñ–∞–π—Ä–≤–æ–ª–∞!)
# –ó–∞–º–µ–Ω–∏—Ç–µ 22 –Ω–∞ –≤–∞—à –ø–æ—Ä—Ç SSH, –µ—Å–ª–∏ –æ–Ω –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è
sudo ufw allow 22/tcp

# –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ HTTP
sudo ufw allow 80/tcp

# –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ HTTPS
sudo ufw allow 443/tcp

# –í–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∞–π—Ä–≤–æ–ª–∞ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –≤–∫–ª—é—á–µ–Ω)
sudo ufw enable

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo ufw status verbose
```

**–í–∞–∂–Ω–æ:** 
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç SSH (–æ–±—ã—á–Ω–æ 22) –æ—Ç–∫—Ä—ã—Ç –ø–µ—Ä–µ–¥ –≤–∫–ª—é—á–µ–Ω–∏–µ–º —Ñ–∞–π—Ä–≤–æ–ª–∞, –∏–Ω–∞—á–µ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ—Ç–µ—Ä—è—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É!
- –ï—Å–ª–∏ —Ñ–∞–π—Ä–≤–æ–ª —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ –ø–∞–Ω–µ–ª–∏ FirstByte, –≤–æ–∑–º–æ–∂–Ω–æ, –Ω–µ –Ω—É–∂–Ω–æ –≤–∫–ª—é—á–∞—Ç—å UFW, –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –µ–≥–æ —Ç–∞–∫, —á—Ç–æ–±—ã –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–∞–Ω–µ–ª–∏
- –î–ª—è FirstByte —Ç–∞–∫–∂–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∞–π—Ä–≤–æ–ª–∞ –≤ –≤–µ–±-–ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–º

---

## –®–ê–ì 2: –£–°–¢–ê–ù–û–í–ö–ê –ù–ï–û–ë–•–û–î–ò–ú–û–ì–û –ü–†–û–ì–†–ê–ú–ú–ù–û–ì–û –û–ë–ï–°–ü–ï–ß–ï–ù–ò–Ø

### 2.1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js —á–µ—Ä–µ–∑ NVM (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

NVM (Node Version Manager) –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –≤–µ—Ä—Å–∏—è–º–∏ Node.js:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ NVM
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è bash
source ~/.bashrc

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js 20 LTS (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –≤–µ—Ä—Å–∏—è)
nvm install 20
nvm use 20
nvm alias default 20

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
node --version
npm --version
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:** Node.js –≤–µ—Ä—Å–∏–∏ 20.x.x –∏ npm –≤–µ—Ä—Å–∏–∏ 10.x.x

### 2.2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL
sudo apt install -y postgresql postgresql-contrib

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–ª—É–∂–±—ã
sudo systemctl status postgresql

# –í–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ PostgreSQL
sudo systemctl enable postgresql
```

### 2.2.1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è PostgreSQL –¥–ª—è –º–∞–ª–æ–º–æ—â–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û!)

**–î–ª—è —Å–µ—Ä–≤–µ—Ä–∞ —Å 768 MB RAM –Ω—É–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å PostgreSQL, –∏–Ω–∞—á–µ –æ–Ω –±—É–¥–µ—Ç –ø–æ—Ç—Ä–µ–±–ª—è—Ç—å —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–∞–º—è—Ç–∏.**

```bash
# –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ñ–∏–≥–∞
sudo cp /etc/postgresql/*/main/postgresql.conf /etc/postgresql/*/main/postgresql.conf.backup

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ PostgreSQL
sudo nano /etc/postgresql/*/main/postgresql.conf
```

**–ù–∞–π–¥–∏—Ç–µ –∏ –∏–∑–º–µ–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**

```ini
# –ü–∞–º—è—Ç—å (–¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞ —Å 768 MB RAM)
shared_buffers = 128MB              # –ë—ã–ª–æ: 128MB (–æ—Å—Ç–∞–≤–ª—è–µ–º)
effective_cache_size = 256MB        # –ë—ã–ª–æ: 4GB (—É–º–µ–Ω—å—à–∞–µ–º!)
maintenance_work_mem = 64MB         # –ë—ã–ª–æ: 64MB (–æ—Å—Ç–∞–≤–ª—è–µ–º)
work_mem = 4MB                      # –ë—ã–ª–æ: 4MB (–æ—Å—Ç–∞–≤–ª—è–µ–º)
max_connections = 20                # –ë—ã–ª–æ: 100 (—É–º–µ–Ω—å—à–∞–µ–º!)

# –ü—Ä–æ–≤–µ—Ä–∫–∏ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (—É–ø—Ä–æ—â–∞–µ–º –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤)
checkpoint_timeout = 15min          # –ë—ã–ª–æ: 5min (—É–≤–µ–ª–∏—á–∏–≤–∞–µ–º)
checkpoint_completion_target = 0.9
wal_buffers = 4MB                   # –ë—ã–ª–æ: 16MB (—É–º–µ–Ω—å—à–∞–µ–º)
default_statistics_target = 50      # –ë—ã–ª–æ: 100 (—É–º–µ–Ω—å—à–∞–µ–º)
random_page_cost = 1.1              # –î–ª—è SSD
effective_io_concurrency = 200      # –î–ª—è SSD
```

**–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:** `Ctrl+O`, `Enter`, `Ctrl+X`

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è pg_hba.conf (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):**

```bash
sudo nano /etc/postgresql/*/main/pg_hba.conf
```

**–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ PostgreSQL:**

```bash
sudo systemctl restart postgresql
sudo systemctl status postgresql
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏ PostgreSQL:**

```bash
# –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
ps aux | grep postgres
free -h
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** PostgreSQL –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ~150-200 MB RAM –≤–º–µ—Å—Ç–æ 400+ MB.

### 2.3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx
sudo apt install -y nginx

# –ó–∞–ø—É—Å–∫ Nginx
sudo systemctl start nginx

# –í–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ Nginx
sudo systemctl enable nginx

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo systemctl status nginx
```

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Nginx –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ IP-–∞–¥—Ä–µ—Å—É —Å–µ—Ä–≤–µ—Ä–∞. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ `http://YOUR_SERVER_IP` - –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è Nginx.

### 2.4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2 (–º–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –¥–ª—è Node.js)

PM2 –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏, –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2 –≥–ª–æ–±–∞–ª—å–Ω–æ
npm install -g pm2

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
pm2 --version
```

### 2.5. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Certbot (–¥–ª—è SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤)

Certbot –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ Let's Encrypt:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Certbot –∏ –ø–ª–∞–≥–∏–Ω–∞ –¥–ª—è Nginx
sudo apt install -y certbot python3-certbot-nginx

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
certbot --version
```

### 2.6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ü–û

**–í–∞–∂–Ω–æ –¥–ª—è –º–∞–ª–æ–º–æ—â–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É –≤–∞—Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞ –∏ –ø–∞–º—è—Ç–∏:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏
free -h

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∏—Å–∫–∞
df -h

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
dpkg-query -Wf '${Installed-Size}\t${Package}\n' | sort -rn | head -20

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ apt (–æ—Å–≤–æ–±–æ–¥–∏—Ç –º–µ—Å—Ç–æ)
sudo apt clean
```

**–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- **–ü–∞–º—è—Ç—å:** –î–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–≤–æ–±–æ–¥–Ω–æ ~500+ MB (–ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ swap)
- **–î–∏—Å–∫:** –î–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–≤–æ–±–æ–¥–Ω–æ ~3+ GB –∏–∑ 5 GB

**–ï—Å–ª–∏ –º–µ—Å—Ç–∞ –º–∞–ª–æ:**
```bash
# –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
sudo apt autoremove -y

# –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤
sudo journalctl --vacuum-time=3d
```

---

## –®–ê–ì 3: –ù–ê–°–¢–†–û–ô–ö–ê –ë–ê–ó–´ –î–ê–ù–ù–´–•

### 3.1. –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```bash
# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è postgres
sudo -u postgres psql
```

–í –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–æ–Ω—Å–æ–ª–∏ PostgreSQL –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã:

```sql
-- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
CREATE USER loaddevice_user WITH PASSWORD 'your_secure_password_here';

-- –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
CREATE DATABASE loaddevice_db OWNER loaddevice_user;

-- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–∞ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
GRANT ALL PRIVILEGES ON DATABASE loaddevice_db TO loaddevice_user;

-- –í—ã—Ö–æ–¥ –∏–∑ PostgreSQL
\q
```

**–í–∞–∂–Ω–æ:** 
- –ó–∞–º–µ–Ω–∏—Ç–µ `your_secure_password_here` –Ω–∞ –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å
- –ó–∞–ø–æ–º–Ω–∏—Ç–µ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ - –æ–Ω–∏ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `DATABASE_URL` –≤ `.env` —Ñ–∞–π–ª–µ

### 3.2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
sudo -u postgres psql -d loaddevice_db -U loaddevice_user
```

–ï—Å–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ, –≤—ã —É–≤–∏–¥–∏—Ç–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ PostgreSQL. –í–≤–µ–¥–∏—Ç–µ `\q` –¥–ª—è –≤—ã—Ö–æ–¥–∞.

---

## –®–ê–ì 4: –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–ï –ö–û–î–ê –ü–†–û–ï–ö–¢–ê

### 4.1. –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
sudo mkdir -p /var/www/loaddevice

# –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–∞ –≤–∞—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
sudo chown -R $USER:$USER /var/www/loaddevice

# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd /var/www/loaddevice
```

### 4.2. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏–∑ Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

**–ü—Ä–æ–µ–∫—Ç —É–∂–µ —Ä–∞–∑–º–µ—â—ë–Ω –Ω–∞ GitHub:** https://github.com/regeraq/nagruz

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/regeraq/nagruz.git .

# –ò–ª–∏ –µ—Å–ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –±—ã–ª –æ–±–Ω–æ–≤–ª—ë–Ω –∏ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥:
# cd /var/www/loaddevice
# git pull origin main
```

### 4.3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
cd /var/www/loaddevice

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç, —Ç–∞–∫ –∫–∞–∫ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞.

### 4.4. –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è production
npm run build
```

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `dist/` —Å —Å–æ–±—Ä–∞–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏:
- `dist/index.js` - —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
- `dist/public/` - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∫–ª–∏–µ–Ω—Ç–∞

### 4.5. –°–æ–∑–¥–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π–ª–∞ `.env`

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ .env
nano .env
```

–î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–∑–∞–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –≤–∞—à–∏):

```env
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=postgresql://loaddevice_user:your_secure_password_here@localhost:5432/loaddevice_db

# Node.js –æ–∫—Ä—É–∂–µ–Ω–∏–µ
NODE_ENV=production
PORT=5000

# JWT —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏ (—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–µ —Å–ª—É—á–∞–π–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏)
JWT_SECRET=your-very-secure-random-secret-key-minimum-32-characters-long

# Email –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (Resend)
RESEND_API_KEY=your-resend-api-key-here
OWNER_EMAIL=your-email@example.com
RESEND_FROM_EMAIL=onboarding@resend.dev

# URL —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (–¥–ª—è —Å—Å—ã–ª–æ–∫ –≤ email)
FRONTEND_URL=https://your-domain.com
```

**–ö–∞–∫ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–¥–µ–∂–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏:**

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –¥–ª—è JWT_SECRET
openssl rand -base64 32
```

**–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞:**
- –í nano: –Ω–∞–∂–º–∏—Ç–µ `Ctrl+O` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, –∑–∞—Ç–µ–º `Enter`, –∑–∞—Ç–µ–º `Ctrl+X` –¥–ª—è –≤—ã—Ö–æ–¥–∞

### 4.6. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –µ—Å—Ç—å)

–ï—Å–ª–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ –µ—Å—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

```bash
# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π —á–µ—Ä–µ–∑ Drizzle Kit
npm run db:push
```

–ò–ª–∏ –µ—Å–ª–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ SQL:

```bash
# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ SQL –º–∏–≥—Ä–∞—Ü–∏–π
psql -U loaddevice_user -d loaddevice_db -f migrations/your_migration_file.sql
```

---

## –®–ê–ì 5: –ó–ê–ü–£–°–ö –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø

### 5.1. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ PM2

**–î–ª—è –º–∞–ª–æ–º–æ—â–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –≤–∞–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ Node.js:**

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
cd /var/www/loaddevice

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –ø–∞–º—è—Ç–∏ (–º–∞–∫—Å–∏–º—É–º 300 MB –¥–ª—è Node.js)
pm2 start dist/index.js --name loaddevice --max-memory-restart 300M

# –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ PM2 –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
nano ecosystem.config.js
```

**–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `ecosystem.config.js` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:**

```javascript
module.exports = {
  apps: [{
    name: 'loaddevice',
    script: './dist/index.js',
    instances: 1,
    exec_mode: 'fork',
    max_memory_restart: '300M',
    node_args: '--max-old-space-size=256',
    env: {
      NODE_ENV: 'production',
      PORT: 5000
    },
    error_file: './logs/pm2-error.log',
    out_file: './logs/pm2-out.log',
    log_date_format: 'YYYY-MM-DD HH:mm:ss Z',
    merge_logs: true,
    autorestart: true,
    watch: false
  }]
};
```

**–ó–∞–ø—É—Å–∫ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π:**

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –ª–æ–≥–æ–≤
mkdir -p logs

# –ó–∞–ø—É—Å–∫ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
pm2 start ecosystem.config.js

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
pm2 status
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ `online`.

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏:**

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
pm2 monit

# –ò–ª–∏
pm2 show loaddevice
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ~150-250 MB RAM.

### 5.2. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
pm2 logs loaddevice

# –ò–ª–∏ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
pm2 logs loaddevice --lines 100
```

### 5.3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ PM2
pm2 save

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ PM2 –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã
pm2 startup

# –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É, –∫–æ—Ç–æ—Ä—É—é –≤—ã–≤–µ–¥–µ—Ç pm2 startup (–æ–Ω–∞ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫):
# sudo env PATH=$PATH:/home/deploy/.nvm/versions/node/v20.x.x/bin /home/deploy/.nvm/versions/node/v20.x.x/lib/node_modules/pm2/bin/pm2 startup systemd -u deploy --hp /home/deploy
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** PM2 –≤—ã–≤–µ–¥–µ—Ç –∫–æ–º–∞–Ω–¥—É, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å `sudo`. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –µ—ë.

### 5.4. –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã PM2

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 restart loaddevice

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 stop loaddevice

# –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑ PM2
pm2 delete loaddevice

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
pm2 monit

# –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
pm2 show loaddevice
```

### 5.5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–ª—É—à–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 5000
curl http://localhost:5000

# –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ netstat
sudo netstat -tlnp | grep 5000
```

---

## –®–ê–ì 6: –ù–ê–°–¢–†–û–ô–ö–ê NGINX –í –ö–ê–ß–ï–°–¢–í–ï REVERSE PROXY

### 6.1. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ Nginx

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
sudo nano /etc/nginx/sites-available/loaddevice
```

### 6.2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–∑–∞–º–µ–Ω–∏—Ç–µ `your-domain.com` –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω):

```nginx
# HTTP —Å–µ—Ä–≤–µ—Ä - —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ HTTPS
server {
    listen 80;
    listen [::]:80;
    server_name your-domain.com www.your-domain.com;

    # –í—Ä–µ–º–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
    # –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ HTTPS –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç:
    # return 301 https://$server_name$request_uri;
    
    # –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–≤—Ä–µ–º–µ–Ω–Ω–æ, –¥–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSL)
    location / {
        proxy_pass http://localhost:5000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
        
        # –¢–∞–π–º–∞—É—Ç—ã –¥–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 60s;
    }

    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤ (–¥–ª—è —Ñ–æ—Ä–º —Å –≤–ª–æ–∂–µ–Ω–∏—è–º–∏)
    client_max_body_size 20M;
}

# HTTPS —Å–µ—Ä–≤–µ—Ä (–±—É–¥–µ—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSL)
# –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
# server {
#     listen 443 ssl http2;
#     listen [::]:443 ssl http2;
#     server_name your-domain.com www.your-domain.com;
#
#     # SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (–±—É–¥—É—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã Certbot)
#     ssl_certificate /etc/letsencrypt/live/your-domain.com/fullchain.pem;
#     ssl_certificate_key /etc/letsencrypt/live/your-domain.com/privkey.pem;
#
#     # –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSL
#     ssl_protocols TLSv1.2 TLSv1.3;
#     ssl_ciphers HIGH:!aNULL:!MD5;
#     ssl_prefer_server_ciphers on;
#     ssl_session_cache shared:SSL:10m;
#     ssl_session_timeout 10m;
#
#     # –õ–æ–≥–∏
#     access_log /var/log/nginx/loaddevice-access.log;
#     error_log /var/log/nginx/loaddevice-error.log;
#
#     # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
#     client_max_body_size 20M;
#
#     # –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
#     location / {
#         proxy_pass http://localhost:5000;
#         proxy_http_version 1.1;
#         proxy_set_header Upgrade $http_upgrade;
#         proxy_set_header Connection 'upgrade';
#         proxy_set_header Host $host;
#         proxy_set_header X-Real-IP $remote_addr;
#         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_set_header X-Forwarded-Proto $scheme;
#         proxy_cache_bypass $http_upgrade;
#
#         # –¢–∞–π–º–∞—É—Ç—ã
#         proxy_connect_timeout 60s;
#         proxy_send_timeout 60s;
#         proxy_read_timeout 60s;
#     }
#
#     # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
#     location ~* \.(jpg|jpeg|png|gif|ico|css|js|svg|woff|woff2|ttf|eot)$ {
#         proxy_pass http://localhost:5000;
#         expires 1y;
#         add_header Cache-Control "public, immutable";
#     }
# }
```

**–í–∞–∂–Ω–æ:** 
- –ó–∞–º–µ–Ω–∏—Ç–µ `your-domain.com` –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω
- –ü–æ–∫–∞ –æ—Å—Ç–∞–≤—å—Ç–µ HTTP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∞–∫—Ç–∏–≤–Ω–æ–π (–±–µ–∑ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –Ω–∞ HTTPS) - —ç—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

### 6.3. –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–æ–π —Å—Å—ã–ª–∫–∏ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Å–∞–π—Ç–∞
sudo ln -s /etc/nginx/sites-available/loaddevice /etc/nginx/sites-enabled/

# –£–¥–∞–ª–µ–Ω–∏–µ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
sudo rm /etc/nginx/sites-enabled/default

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–∞ –æ—à–∏–±–∫–∏
sudo nginx -t
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:** `nginx: configuration file /etc/nginx/nginx.conf test is successful`

### 6.4. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ Nginx

```bash
# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ Nginx –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
sudo systemctl reload nginx

# –ò–ª–∏ –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
sudo systemctl restart nginx

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo systemctl status nginx
```

### 6.5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ `http://your-domain.com` –∏–ª–∏ `http://YOUR_SERVER_IP`. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ï—Å–ª–∏ –¥–æ–º–µ–Ω –µ—â–µ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ IP-–∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞. –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–æ–º–µ–Ω–æ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å DNS –∑–∞–ø–∏—Å–∏ —É –≤–∞—à–µ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–æ–º–µ–Ω–∞.

---

## –®–ê–ì 7: –ù–ê–°–¢–†–û–ô–ö–ê HTTPS

### 7.1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS –∑–∞–ø–∏—Å–µ–π

–ü–µ—Ä–µ–¥ –ø–æ–ª—É—á–µ–Ω–∏–µ–º SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ DNS –∑–∞–ø–∏—Å–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

**–£ –≤–∞—à–µ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–æ–º–µ–Ω–∞ —Å–æ–∑–¥–∞–π—Ç–µ A-–∑–∞–ø–∏—Å–∏:**

```
your-domain.com      A       YOUR_SERVER_IP
www.your-domain.com  A       YOUR_SERVER_IP
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ CNAME –¥–ª—è www:

```
your-domain.com      A       YOUR_SERVER_IP
www.your-domain.com  CNAME   your-domain.com
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –¥–ª—è FirstByte:**
- –ï—Å–ª–∏ –≤—ã –ø–æ–∫—É–ø–∞–ª–∏ –¥–æ–º–µ–Ω —á–µ—Ä–µ–∑ FirstByte, DNS –∑–∞–ø–∏—Å–∏ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä—è–º–æ –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –ï—Å–ª–∏ –¥–æ–º–µ–Ω —É –¥—Ä—É–≥–æ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ DNS –∑–∞–ø–∏—Å–∏ —Ç–∞–º, —É–∫–∞–∑–∞–≤ IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ FirstByte

**–ü—Ä–æ–≤–µ—Ä–∫–∞ DNS:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS –∑–∞–ø–∏—Å–µ–π
dig your-domain.com
nslookup your-domain.com

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–Ω–ª–∞–π–Ω-—Å–µ—Ä–≤–∏—Å—ã:
# https://dnschecker.org/
# https://www.whatsmydns.net/
```

–î–æ–∂–¥–∏—Ç–µ—Å—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è DNS (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–∏–Ω—É—Ç –¥–æ 24 —á–∞—Å–æ–≤, –æ–±—ã—á–Ω–æ 5-30 –º–∏–Ω—É—Ç).

### 7.2. –ü–æ–ª—É—á–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —á–µ—Ä–µ–∑ Certbot

```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –¥–ª—è –≤–∞—à–µ–≥–æ –¥–æ–º–µ–Ω–∞
sudo certbot --nginx -d your-domain.com -d www.your-domain.com
```

**–í–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Certbot:**

1. –í–≤–µ–¥–∏—Ç–µ –≤–∞—à email –∞–¥—Ä–µ—Å (–¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞)
2. –°–æ–≥–ª–∞—Å–∏—Ç–µ—Å—å —Å —É—Å–ª–æ–≤–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (A)
3. –í—ã–±–µ—Ä–∏—Ç–µ, —Ö–æ—Ç–∏—Ç–µ –ª–∏ –≤—ã –¥–µ–ª–∏—Ç—å—Å—è email —Å EFF (Y/N)
4. Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç Nginx –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å HTTPS

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ü–æ–ª—É—á–∏—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –æ—Ç Let's Encrypt
- –û–±–Ω–æ–≤–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx
- –ù–∞—Å—Ç—Ä–æ–∏—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç —Å HTTP –Ω–∞ HTTPS

### 7.3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

Let's Encrypt —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã 90 –¥–Ω–µ–π. Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:

```bash
# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (dry-run)
sudo certbot renew --dry-run
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:** –£—Å–ø–µ—à–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞.

### 7.4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx –¥–ª—è HTTPS

–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo cat /etc/nginx/sites-available/loaddevice
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å, —á—Ç–æ Certbot –¥–æ–±–∞–≤–∏–ª SSL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–∏–ª —Ä–µ–¥–∏—Ä–µ–∫—Ç —Å HTTP –Ω–∞ HTTPS.

### 7.5. –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ HTTPS

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
sudo nginx -t

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ Nginx
sudo systemctl reload nginx
```

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ `https://your-domain.com`. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
- ‚úÖ –ó–µ–ª–µ–Ω—ã–π –∑–∞–º–æ–∫ –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ
- ‚úÖ –í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ HTTPS
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç —Å HTTP –Ω–∞ HTTPS

---

## –ü–†–û–í–ï–†–ö–ê –ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ PM2
pm2 status

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ Nginx
sudo systemctl status nginx

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ PostgreSQL
sudo systemctl status postgresql

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
curl http://localhost:5000

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ Nginx
curl http://your-domain.com
curl https://your-domain.com
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ SSL

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–Ω–ª–∞–π–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:
- [SSL Labs SSL Test](https://www.ssllabs.com/ssltest/)
- [Security Headers](https://securityheaders.com/)

–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ü–µ–Ω–∫—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `https://your-domain.com`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º (–∫–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è —Ñ–æ—Ä–º–∞, –∑–∞–∫–∞–∑—ã)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

---

## –£–°–¢–†–ê–ù–ï–ù–ò–ï –ù–ï–ü–û–õ–ê–î–û–ö

### –ü—Ä–æ–±–ª–µ–º–∞: –°–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ PM2
pm2 status
pm2 logs loaddevice

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ Nginx
sudo systemctl status nginx
sudo nginx -t

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
sudo netstat -tlnp | grep 5000
sudo netstat -tlnp | grep 80
sudo netstat -tlnp | grep 443

# 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ Nginx
sudo tail -f /var/log/nginx/error.log
sudo tail -f /var/log/nginx/loaddevice-error.log
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ: `pm2 restart loaddevice`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç –≤ `.env` —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ø–æ—Ä—Ç–æ–º –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª: `sudo ufw status`

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ PostgreSQL
sudo systemctl status postgresql

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
psql -U loaddevice_user -d loaddevice_db

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ DATABASE_URL –≤ .env
cat .env | grep DATABASE_URL
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω: `sudo systemctl start postgresql`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å DATABASE_URL –≤ `.env`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–æ–±–ª–µ–º–∞: SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
sudo certbot certificates

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx
sudo nginx -t

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ Certbot
sudo tail -f /var/log/letsencrypt/letsencrypt.log
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ DNS –∑–∞–ø–∏—Å–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç—ã 80 –∏ 443 –æ—Ç–∫—Ä—ã—Ç—ã –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç: `sudo certbot renew`

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**

```bash
# 1. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ PM2
pm2 logs loaddevice --lines 100

# 2. –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–ø—É—Å–∫–∞ –≤—Ä—É—á–Ω—É—é
cd /var/www/loaddevice
node dist/index.js
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ `.env`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç —Å–æ–±—Ä–∞–Ω: `npm run build`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é Node.js: `node --version` (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 18+)

### –ü—Ä–æ–±–ª–µ–º–∞: 502 Bad Gateway

**–ü—Ä–∏—á–∏–Ω–∞:** Nginx –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –Ω–∞ –ø–æ—Ä—Ç—É 5000.

**–†–µ—à–µ–Ω–∏–µ:**

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ
pm2 status

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç
sudo netstat -tlnp | grep 5000

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 restart loaddevice

# 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
pm2 logs loaddevice
```

### –ü—Ä–æ–±–ª–µ–º–∞: 413 Request Entity Too Large

**–ü—Ä–∏—á–∏–Ω–∞:** –†–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏–º–∏—Ç Nginx.

**–†–µ—à–µ–Ω–∏–µ:**

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx –∏ —É–≤–µ–ª–∏—á—å—Ç–µ `client_max_body_size`:

```bash
sudo nano /etc/nginx/sites-available/loaddevice
```

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –µ—Å—Ç—å —Å—Ç—Ä–æ–∫–∞:
```nginx
client_max_body_size 20M;
```

–ó–∞—Ç–µ–º –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ Nginx:
```bash
sudo systemctl reload nginx
```

---

## –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò

### –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è FirstByte

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ –ø–∞–Ω–µ–ª–∏ FirstByte:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è FirstByte –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É CPU, RAM, –¥–∏—Å–∫–∞
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)

**–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- FirstByte –º–æ–∂–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —É—Å–ª—É–≥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –±—ç–∫–∞–ø–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –æ–ø—Ü–∏–∏ –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å–º. –Ω–∏–∂–µ)

**–û–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã:**
- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Å–∏—Å—Ç–µ–º—É: `sudo apt update && sudo apt upgrade -y`
- FirstByte –æ–±—ã—á–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –æ–±—Ä–∞–∑—ã –û–°, –Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤–∞–∂–Ω—ã

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

**–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –±—ç–∫–∞–ø–æ–≤
mkdir -p ~/backups

# –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –±—ç–∫–∞–ø–∞
nano ~/backup-db.sh
```

–î–æ–±–∞–≤—å—Ç–µ –≤ —Å–∫—Ä–∏–ø—Ç:

```bash
#!/bin/bash
BACKUP_DIR="$HOME/backups"
DATE=$(date +%Y%m%d_%H%M%S)
pg_dump -U loaddevice_user loaddevice_db > "$BACKUP_DIR/loaddevice_db_$DATE.sql"
# –£–¥–∞–ª–µ–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤ —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π
find "$BACKUP_DIR" -name "loaddevice_db_*.sql" -mtime +7 -delete
```

–°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:

```bash
chmod +x ~/backup-db.sh
```

–î–æ–±–∞–≤—å—Ç–µ –≤ crontab (–µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±—ç–∫–∞–ø –≤ 2:00):

```bash
crontab -e
```

–î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É:
```
0 2 * * * /home/deploy/backup-db.sh
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ htop –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
sudo apt install -y htop

# –ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
htop
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

PM2 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç –≤—ã–≤–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –õ–æ–≥–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤:
```bash
~/.pm2/logs/
```

---

## –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

‚úÖ –†–∞–∑–≤–µ—Ä–Ω—É—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ  
‚úÖ –î–æ—Å—Ç—É–ø–Ω–æ –ø–æ –¥–æ–º–µ–Ω—É  
‚úÖ –†–∞–±–æ—Ç–∞—Ç—å –ø–æ HTTPS  
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞  
‚úÖ –ò–º–µ—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ñ–∞–π—Ä–≤–æ–ª  
‚úÖ –ò–º–µ—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö  

**–í–∞–∂–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è:**

1. –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Å–∏—Å—Ç–µ–º—É: `sudo apt update && sudo apt upgrade -y`
2. –î–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
3. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: `pm2 logs loaddevice`
4. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤: `pm2 status`, `sudo systemctl status nginx`
5. –û–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞: `npm update`

**–ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
pm2 status
sudo systemctl status nginx
sudo systemctl status postgresql

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
pm2 logs loaddevice
sudo tail -f /var/log/nginx/loaddevice-access.log

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
cd /var/www/loaddevice
git pull
npm install
npm run build
pm2 restart loaddevice
```

---

---

## –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø –î–õ–Ø –ú–ê–õ–û–ú–û–©–ù–û–ì–û –°–ï–†–í–ï–†–ê (768 MB RAM)

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —É—Ç–∏–ª–∏—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ htop –∏ –¥—Ä—É–≥–∏—Ö —É—Ç–∏–ª–∏—Ç
sudo apt install -y htop iotop nethogs

# –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
htop
```

**–°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤:**

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
nano ~/check-resources.sh
```

–î–æ–±–∞–≤—å—Ç–µ –≤ —Å–∫—Ä–∏–ø—Ç:

```bash
#!/bin/bash
echo "=== –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –†–ï–°–£–†–°–û–í ==="
echo ""
echo "–ü–∞–º—è—Ç—å:"
free -h
echo ""
echo "–î–∏—Å–∫:"
df -h
echo ""
echo "–ü—Ä–æ—Ü–µ—Å—Å—ã (—Ç–æ–ø 10 –ø–æ –ø–∞–º—è—Ç–∏):"
ps aux --sort=-%mem | head -11
echo ""
echo "PM2 —Å—Ç–∞—Ç—É—Å:"
pm2 status
echo ""
echo "PostgreSQL:"
sudo systemctl status postgresql --no-pager | head -10
echo ""
echo "Nginx:"
sudo systemctl status nginx --no-pager | head -10
```

–°–¥–µ–ª–∞–π—Ç–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:

```bash
chmod +x ~/check-resources.sh
```

**–ó–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏:**

```bash
~/check-resources.sh
```

### –û—á–∏—Å—Ç–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤

```bash
# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ apt
sudo apt clean
sudo apt autoremove -y

# –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤ (—Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏ –º–æ–≥—É—Ç –∑–∞–Ω–∏–º–∞—Ç—å –º–µ—Å—Ç–æ)
sudo journalctl --vacuum-time=7d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
sudo du -sh /var/log/*
sudo du -sh /var/www/*
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Nginx –¥–ª—è –º–∞–ª–æ–≥–æ –æ–±—ä–µ–º–∞ –ø–∞–º—è—Ç–∏

```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx
sudo nano /etc/nginx/nginx.conf
```

**–ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é `worker_processes` –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:**

```nginx
worker_processes 1;  # –î–ª—è 1 —è–¥—Ä–∞ CPU
worker_connections 512;  # –£–º–µ–Ω—å—à–∞–µ–º —Å 1024
```

**–î–æ–±–∞–≤—å—Ç–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**

```nginx
# –í —Å–µ–∫—Ü–∏–∏ http
client_body_buffer_size 128k;
client_max_body_size 20m;
client_header_buffer_size 1k;
large_client_header_buffers 2 1k;
```

**–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Nginx:**

```bash
sudo nginx -t
sudo systemctl reload nginx
```

### –û–∂–∏–¥–∞–µ–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

**–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**

- **–°–∏—Å—Ç–µ–º–∞ (Ubuntu):** ~100-150 MB
- **PostgreSQL:** ~150-200 MB
- **Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:** ~150-250 MB
- **Nginx:** ~20-30 MB
- **–†–µ–∑–µ—Ä–≤:** ~100-200 MB –¥–ª—è –±—É—Ñ–µ—Ä–æ–≤ –∏ –∫—ç—à–∞
- **–ò—Ç–æ–≥–æ:** ~520-830 MB (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 768 MB + 1 GB swap)

**–ü—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ 2 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏: ~600-700 MB
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU: 10-30% (–ø–∏–∫–∏ –¥–æ 50%)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞: ~2-3 GB (—Å —É—á–µ—Ç–æ–º –û–°, –ë–î, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)

### –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

‚ö†Ô∏è **–í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å:**

1. **–≠—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å –º–∞–ª—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. **–ü—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏** (5+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π) —Å–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç –Ω–∞—á–∞—Ç—å —Ç–æ—Ä–º–æ–∑–∏—Ç—å
3. **Swap —Ñ–∞–π–ª** –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è, —á—Ç–æ –∑–∞–º–µ–¥–ª–∏—Ç —Ä–∞–±–æ—Ç—É (–Ω–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç –ø–∞–¥–µ–Ω–∏—è)
4. **–†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤: `~/check-resources.sh`
5. **–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö** —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞–ø–≥—Ä–µ–π–¥–∞ —Å–µ—Ä–≤–µ—Ä–∞

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é

**–ï—Å–ª–∏ –Ω–∞–≥—Ä—É–∑–∫–∞ —Ä–∞—Å—Ç–µ—Ç:**

1. **–ú–∏–Ω–∏–º—É–º –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã:** 2 GB RAM, 2 CPU —è–¥—Ä–∞
2. **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production:** 4 GB RAM, 2-4 CPU —è–¥—Ä–∞
3. **–î–ª—è –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫:** 8+ GB RAM, 4+ CPU —è–¥—Ä–∞

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–π –ë–î (–Ω–∞–ø—Ä–∏–º–µ—Ä, managed PostgreSQL)
- –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ –±–æ–ª–µ–µ –º–æ—â–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CDN –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

---

## –°–ü–ï–¶–ò–§–ò–ö–ê FIRSTBYTE: –ü–û–õ–ï–ó–ù–´–ï –°–û–í–ï–¢–´

### –†–∞–±–æ—Ç–∞ —Å –ø–∞–Ω–µ–ª—å—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è FirstByte

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –ø–∞–Ω–µ–ª–∏:**
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ (soft/hard reboot)
- –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –û–° (–µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π—Ä–≤–æ–ª–æ–º (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
- –î–æ—Å—Ç—É–ø –∫ –≤–µ–±-–∫–æ–Ω—Å–æ–ª–∏ (VNC/KVM) –¥–ª—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
- –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å–µ—Ç–µ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ FirstByte

FirstByte –æ–±—ã—á–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π IP-–∞–¥—Ä–µ—Å
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö IP (–∑–∞ –æ—Ç–¥–µ–ª—å–Ω—É—é –ø–ª–∞—Ç—É)
- –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –±–µ–∑ NAT

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ IP-–∞–¥—Ä–µ—Å–∞
ip addr show

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
ip route show

# –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS
cat /etc/resolv.conf
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è FirstByte

1. **–ò–∑–º–µ–Ω–∏—Ç–µ root –ø–∞—Ä–æ–ª—å** –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø–∞—Ä–æ–ª—å)
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSH –∫–ª—é—á–∏** –≤–º–µ—Å—Ç–æ –ø–∞—Ä–æ–ª–µ–π
3. **–û—Ç–∫–ª—é—á–∏—Ç–µ –≤—Ö–æ–¥ –ø–æ –ø–∞—Ä–æ–ª—é –¥–ª—è root** (–ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSH –∫–ª—é—á–µ–π)
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ fail2ban** –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ fail2ban
sudo apt install -y fail2ban

# –ó–∞–ø—É—Å–∫ –∏ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
sudo systemctl enable fail2ban
sudo systemctl start fail2ban

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo systemctl status fail2ban
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤ –Ω–∞ FirstByte

FirstByte –æ–±—ã—á–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ –ø–∞–Ω–µ–ª–∏, –Ω–æ –º–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —É—Ç–∏–ª–∏—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
sudo apt install -y htop iotop nethogs

# –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
htop          # CPU, RAM
iotop         # –î–∏—Å–∫ I/O
nethogs       # –°–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫
```

### –ö–æ–Ω—Ç–∞–∫—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏ FirstByte

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ä–≤–µ—Ä–æ–º:
- **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞:** —á–µ—Ä–µ–∑ —Ç–∏–∫–µ—Ç-—Å–∏—Å—Ç–µ–º—É –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://firstbyte.ru/help/ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞)
- **Telegram –∫–∞–Ω–∞–ª:** –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏

---

## üîÑ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –î–ï–ü–õ–û–ô (CI/CD)

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è, –∫–∞–∂–¥—ã–π —Ä–∞–∑ –∫–æ–≥–¥–∞ –≤—ã –¥–µ–ª–∞–µ—Ç–µ `git push` –≤ –≤–µ—Ç–∫—É `main`, –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

### –í–∞—Ä–∏–∞–Ω—Ç 1: GitHub Actions (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

#### –®–∞–≥ 1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSH –∫–ª—é—á–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
ssh-keygen -t ed25519 -C "github-actions-deploy" -f ~/.ssh/github_actions_deploy -N ""

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞
cat ~/.ssh/github_actions_deploy.pub

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ –≤ authorized_keys
cat ~/.ssh/github_actions_deploy.pub >> ~/.ssh/authorized_keys

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞ (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é!)
cat ~/.ssh/github_actions_deploy
```

#### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Secrets

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub: https://github.com/regeraq/nagruz
2. –û—Ç–∫—Ä–æ–π—Ç–µ **Settings** ‚Üí **Secrets and variables** ‚Üí **Actions**
3. –î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ–∫—Ä–µ—Ç—ã:

   - **`SERVER_HOST`** - IP-–∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `46.17.105.24`)
   - **`SERVER_USER`** - –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `deploy`)
   - **`SERVER_PORT`** - –ø–æ—Ä—Ç SSH (–æ–±—ã—á–Ω–æ `22`)
   - **`SSH_PRIVATE_KEY`** - –ø—Ä–∏–≤–∞—Ç–Ω—ã–π SSH –∫–ª—é—á (–≤–µ—Å—å —Ç–µ–∫—Å—Ç –∏–∑ `~/.ssh/github_actions_deploy`)

#### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –°–¥–µ–ª–∞–π—Ç–µ –ª—é–±–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ –∫–æ–¥–µ
2. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏ –∑–∞–ø—É—à—å—Ç–µ:
   ```bash
   git add .
   git commit -m "Test auto-deploy"
   git push origin main
   ```
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Actions** –Ω–∞ GitHub –∏ —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–º –¥–µ–ø–ª–æ—è
4. –ß–µ—Ä–µ–∑ 1-2 –º–∏–Ω—É—Ç—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ!

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–ø—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

–ï—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GitHub Actions, –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞ –¥–µ–ø–ª–æ—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
cd /var/www/loaddevice

# –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –¥–µ–ø–ª–æ—è
curl -o deploy.sh https://raw.githubusercontent.com/regeraq/nagruz/main/deploy.sh
# –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤—Ä—É—á–Ω—É—é –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–∑ deploy.sh

# –î–µ–ª–∞–µ–º —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x deploy.sh
```

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–µ—Ä–µ–∑ cron

```bash
# –û—Ç–∫—Ä—ã—Ç—å crontab
crontab -e

# –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É (–ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç):
*/5 * * * * cd /var/www/loaddevice && /var/www/loaddevice/deploy.sh >> /var/www/loaddevice/deploy.log 2>&1
```

#### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –¥–µ–ø–ª–æ—è

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
cd /var/www/loaddevice
./deploy.sh
```

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º –¥–µ–ø–ª–æ–µ:

1. ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–∑ GitHub (`git pull`)
2. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (`npm install`)
3. ‚úÖ –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ (`npm run build`)
4. ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î (`npm run db:push`)
5. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (`pm2 restart`)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –¥–µ–ø–ª–æ—è

**GitHub Actions:**
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Actions** ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π workflow ‚Üí –ø—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏

**–°–∫—Ä–∏–ø—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
tail -f /var/www/loaddevice/deploy.log

# –ò–ª–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ PM2
pm2 logs loaddevice
```

### –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫)

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
cd /var/www/loaddevice

# –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –∫–æ–º–º–∏—Ç–æ–≤
git log --oneline -10

# –û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É –∫–æ–º–º–∏—Ç—É
git reset --hard HEAD~1

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
npm run build
pm2 restart loaddevice
```

### –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è:

‚ö†Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ñ–∞–π–ª `.env` —Å –ø–∞—Ä–æ–ª—è–º–∏ –∏ —Å–µ–∫—Ä–µ—Ç–∞–º–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ GitHub Secrets –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ SSH –∫–ª—é—á–∏

‚ö†Ô∏è **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –∑–∞–Ω–∏–º–∞–µ—Ç 1-3 –º–∏–Ω—É—Ç—ã
- –í–æ –≤—Ä–µ–º—è –¥–µ–ø–ª–æ—è —Å–∞–π—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–µ–ø–ª–æ–∏—Ç—å –≤ –Ω–µ—Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è –¥–ª—è production

‚úÖ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ –ø–µ—Ä–µ–¥ –ø—É—à–µ–º
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—É—é –≤–µ—Ç–∫—É –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (`develop`)
- –î–µ–ø–ª–æ–π—Ç–µ –≤ `main` —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –∫–æ–¥

---

**–£—Å–ø–µ—à–Ω–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ FirstByte! üöÄ**

