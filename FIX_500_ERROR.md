# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ 500 –ø—Ä–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤

## –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –ë–î (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–¥–µ–ª–∞–Ω–æ)

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh deploy@YOUR_SERVER_IP
cd /var/www/loaddevice/HelloWhoAreYou-1
npm run db:push
pm2 restart loaddevice
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞

```bash
psql -U loaddevice_user -d loaddevice_db -c "\dt commercial_proposal_files"
```

–î–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ç–∞–±–ª–∏—Ü–∞ `commercial_proposal_files`.

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏

```bash
pm2 logs loaddevice --lines 50
```

–ò—â–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ —Å `[Files]` - —Ç–∞–º –±—É–¥–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–µ.

---

## –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –ë–î
psql -U loaddevice_user -d loaddevice_db

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—É
\dt commercial_proposal_files

# –ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü—ã –Ω–µ—Ç - –ø—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é
\q
cd /var/www/loaddevice/HelloWhoAreYou-1
npm run db:push
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ñ–∞–π–ª–æ–≤

```bash
psql -U loaddevice_user -d loaddevice_db -c "SELECT id, file_name, file_size FROM commercial_proposal_files LIMIT 5;"
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ (–∑–∞–º–µ–Ω–∏—Ç–µ FILE_ID)

```bash
psql -U loaddevice_user -d loaddevice_db -c "SELECT id, file_name, file_size, LENGTH(file_path) as data_length FROM commercial_proposal_files WHERE id = 'FILE_ID';"
```

### 4. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Å –¥–µ—Ç–∞–ª—è–º–∏

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ª–æ–≥–æ–≤
pm2 logs loaddevice --lines 100

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫ —Ñ–∞–π–ª–æ–≤
pm2 logs loaddevice | grep -i "file\|download\|error\|500"

# –ü–æ–∏—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ fileId
pm2 logs loaddevice | grep "b663c09c-5b4e-4bc5-bf8b-4eb320a2dc92"
```

---

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –æ—à–∏–±–∫–∏ 500

### ‚ùå –¢–∞–±–ª–∏—Ü–∞ –Ω–µ —Å–æ–∑–¥–∞–Ω–∞
**–°–∏–º–ø—Ç–æ–º:** –í –ª–æ–≥–∞—Ö: `relation commercial_proposal_files does not exist`
**–†–µ—à–µ–Ω–∏–µ:** `npm run db:push`

### ‚ùå –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω
**–°–∏–º–ø—Ç–æ–º:** –í –ª–æ–≥–∞—Ö: `File not found`
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª –±—ã–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ —Å base64 –¥–∞–Ω–Ω—ã–º–∏
**–°–∏–º–ø—Ç–æ–º:** –í –ª–æ–≥–∞—Ö: `Empty base64 data` –∏–ª–∏ `Invalid base64 format`
**–†–µ—à–µ–Ω–∏–µ:** –§–∞–π–ª –±—ã–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
**–°–∏–º–ø—Ç–æ–º:** –í –ª–æ–≥–∞—Ö: `Access denied`
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –∏ –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   ```bash
   pm2 restart loaddevice
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
   - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `pm2 logs loaddevice --lines 20`

3. **–ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î

---

**–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** —Å–º. `TROUBLESHOOTING.md`

